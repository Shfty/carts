pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
panx = 0
scrollx = 8
scrolly = 0
iw = 8
ow = 8
function _update60()
	if btn(0) then
		panx -= 1
	end
	
	if btn(1) then
		panx += 1
	end
	
	if btn(2) then
		scrolly -= 1
	end
	
	if btn(3) then
		scrolly += 1
	end
	
	if btn(4) then
		w -= 1
	end
	
	if btn(5) then
		w += 1
	end
end

function x_scale(y)
 local ly = y/128
 ly -= 0.5
 ly = sin(ly*0.5)
 ly *= ly
 ly += 0.2
 ly *= 5
	return ly
end

function y_uv(y)
	return ((scrolly/4)+(y/2))%8
end

function x_scroll(y)
	local scpan = panx/4
	return (cos(y/128)*8*scpan)-scpan*8
end

function _draw()
	cls()
	for y=0,127 do
 	local xsc = x_scale(y)
 	
 	-- in uv rect
 	local ixr = scrollx+iw
 	local ixl = ixr-iw
 	local iy = y_uv(y)
 	
 	-- out position
 	ox = 64 + x_scroll(y)
 	
 	-- out width
 	local owr = ow*xsc
 	local owl = -owr
 	
 	-- draw left side
		sspr(
			ixl,iy,
			iw,1,
			ox,y,
			owl,1,
			true
		)
		
		--draw right side
		sspr(
			ixr,iy,
			iw,1,
			ox,y,
			owr,1
		)
	end
	
	print(scrollx)
end
__gfx__
000000000123456789abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
000000001234567889abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
007007002345678989abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
000770003456789a89abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
00077000456789ab89abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
0070070056789abc89abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
000000006789abcd89abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
00000000789abcde89abcdef000000000000000000000000000000000123456789abcdef00000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
00000000000000000123456789abcdef00000000000000000123456789abcdef0000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
0000000000000000000000000123456789abcdef0123456789abcdef000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
000000000000000000000000000000000123456789abcdef00000000000000000000000000000000012345670000000089abcdef000000000123456789abcdef
